# Routers

Routers are OSI Layer 3 (Network) devices.

Routers connect multiple (two or more) networks and manages the efficient and accurate routing/movement of traffic along its path to its destination. 

Routers break up broadcast domains by default.

Routers connect packet-switched networks where packets are routed along a best-effort and connectionless path. This means that each transmitted packet may take a different path from source to destination as network conditions vary over time. Contrast this with circuit-switched networks where a circuit is established at connection time and persists through the duration of communication to which the connection traffic has exclusive and unique access.

## Routing Protocols

Routing protocols are used by routers to discover nearby networks. As networks are discovered they are entered into a routing table that informs the router which interface to forward traffic along.

Each discovered network route is scored based on a criteria detirmined by the routing protocol and used to choose the best route for the router.

### Link State Protocols

Link state protocols transmit information only on the state of their immediate links and calculate the route score based on shortest path algorithms, such as Dijkstra's Algorithm, where each link has a score associated with it.

* Intermediate System-Intermediate System (IS-IS)
* Open Shortest Path First (OSPF)

### Distance Vector Protocols

Distance Vector protocols transmit the entire routing table during advertisement and discovery and typically score network routes based on number of hops to a network.

* Routing Information Protocol (RIP)
* Interior Gateway Routing Protocol (IGRP)
* Enhanced IGRP (EIGRP)

### Interior vs. Exterior Gateway Protocols

Interior Gateway Protocols (IGP) (OSPF, RIP, EIGRP, e.g.) route traffic between networks INSIDE an Autonomous System.

Exterior Gateway Protocols (EGP) route traffic between various Autonomous Systems. EGPs are required to form the Internet, and to connect various Internet backbone networks to local Internet Service Providers.

## Autonomous System

Autonomous Systems are logically organized groups of networks that are typically managed by a single organizational unit. Internets are formed by connecting multiple Autonomous Systems together, typically using EGPs.

## Managing Routers

### In-band management

In band management means router configurations can be accessed over the same connections and interfaces that standard user traffic travels.

In general this is considered less secure than out-of-band management, however the benefit to in-band management can mean easier remote monitoring, configuration, and orchestration.

### Out-of-band management

Routers can be managed at the physical device via an interface known as a console port, this port has no connection to any routable interfaces and will, when configuring a physical router, requires physical access. Sometimes this is a 'Management Ethernet Interface' - the connection (cable & connectors / physical communication) is slightly different, but they perform the same function.

It is also possible to have out of band management on a routable interface. This can be achieved in several ways, for example: by segmenting the traffic into certain subnets with exclusive access managed by firewall rules, dedicated routable physical interfaces, and possibly VLANs (for switched modules).

### Router Management Protocols

#### SNMP

The Simple Network Management Protocol (SNMP) is the most often referenced protocol for automated network monitoring and management. There are three versions of SNMP, but should always preference SNMPv3 as it is designed with security features, encrypting the packets, adding message integrity checks, and authentication for valid sources. SNMP is built on top of IP.

SNMP also has the concept of 'Traps' which are notifications generated by managed devices without being requested by a management station. These traps are a useful tool that allow for alerts of significant events.

SNMP uses ports 161 and 162 (traps)

#### NETCONF & YANG

The Network Configuration Protocl (NETCONF) is a protocol that is used to directly install or modify network device configurations over the network. NETCONF is built on top of Remote Procedure Call (RPC).

Yet Another Next Generation (YANG) is an XML format that is used to describe the expected network configuration in a standardized manner, regardless of device vendor specific commands.

## Routed/routable protocols

Routers are most often associated with IP networks; backbone networks and other specialized networks can operate on other routable protocols such as Multi-Protocol Label Switching (MPLS)

Some very uncommon and discontinued routed/routable protocols that are unlikely to be encountered
* Internetwork Packet Exchange (IPX) (uncommon)
* AppleTalk (discontinued)

## Key Ideas

* Routers connect multiple packet-switched or routable networks
* Routers break of broadcast domains
* Routers discover nearby networks in order to build a table of possible routes
* Routers maintain a table of routing information to decide which interface to forward traffic on
* Autonomous Systems (ASs) are logically arranged systems of networks, typically managed by a single proponent and the networks internally are routed by IGPs. Communication between ASs are routed by EGPs.
* Internet is formed by linking ASs together, including backbone networks to local ISPs
* Packet filter firewalls can often be found on routers
* In-band management involves remote access to configuration of the device via the same interfaces and routes accessible and used by standard traffic.
* Out-of-band management involves management via either a physical interface, or a remotely accessible interface that is not accessible to standard traffic.
* SNMP is a common network monitoring/management protocol for network devices
* NETCONF is a protocol that some devices implement to remotely install and modify network configurations using an XML definition known as YANG.